                        ; --------------------------------------
                        ; zasm: assemble "terminal_fw.asm"
                        ; date: 2021-02-24 13:13:39
                        ; --------------------------------------


                        #target rom
                        
0000:                   #code ROM, 0x0000, 0x4000
                        
0000:                   rom	equ 0x0000
4000:                   ram	equ 0x4000
8000:                   video	equ 0x8000
C000:                   uart	equ 0xc000
                        
0000: F3       [ 4]     RST0:	di
0001: 31FF7F   [14]     	ld	sp, $7fff
0004: C36D00   [24]     	jp	start
                        
0007: FF                	defs	0x08-$
0008: C9       [10]     RST1:	ret
                        
0009: FFFFFFFF          	defs	0x10-$
000D: FFFFFF            
0010: C9       [10]     RST2:	ret
                        
0011: FFFFFFFF          	defs	0x18-$
0015: FFFFFF            
0018: C9       [10]     RST3:	ret
                        
0019: FFFFFFFF          	defs	0x20-$
001D: FFFFFF            
0020: C9       [10]     RST4:	ret
                        
0021: FFFFFFFF          	defs	0x28-$
0025: FFFFFF            
0028: C9       [10]     RST5:	ret
                        
0029: FFFFFFFF          	defs	0x30-$
002D: FFFFFF            
0030: C9       [10]     RST6:	ret
                        
0031: FFFFFFFF          	defs	0x38-$
0035: FFFFFF            
0038: FB       [ 4]     RST7:	ei
0039: C9       [14]     	ret
                        
003A: FFFFFFFF          	defs	0x66-$
003E: FF...             
0066: ED57     [ 9]     NMI:	ld	a, i
0068: F5       [20]     	push	af
0069: F1       [30]     	pop	af
006A: E0       [35|41]  	ret	po
006B: FB       [39]     	ei
006C: C9       [49]     	ret
                        
006D:                   start:
                        	; unlock divisor registers
006D: 2103C0   [10]     	ld	hl, uart + 3
0070: 3E80     [17]     	ld	a, 0x80
0072: 77       [24]     	ld	(hl), a
                        
                        	; baud rate divisor
                        	; baud=   300 dTX= 43000 dRX=  2688 tA=12900000.000000 rA=12902400.000000 tE=        0.00 rE=        0.02
                        	; baud=   600 dTX= 21500 dRX=  1344 tA=12900000.000000 rA=12902400.000000 tE=        0.00 rE=        0.02
                        	; baud=  1200 dTX= 10750 dRX=   672 tA=12900000.000000 rA=12902400.000000 tE=        0.00 rE=        0.02
                        	; baud=  2400 dTX=  5375 dRX=   336 tA=12900000.000000 rA=12902400.000000 tE=        0.00 rE=        0.02
                        	; baud=  4800 dTX=  2688 dRX=   168 tA=12902400.000000 rA=12902400.000000 tE=        0.02 rE=        0.02
                        	; baud=  9600 dTX=  1344 dRX=    84 tA=12902400.000000 rA=12902400.000000 tE=        0.02 rE=        0.02
                        	; baud= 19200 dTX=   672 dRX=    42 tA=12902400.000000 rA=12902400.000000 tE=        0.02 rE=        0.02
                        	; baud= 38400 dTX=   336 dRX=    21 tA=12902400.000000 rA=12902400.000000 tE=        0.02 rE=        0.02
                        	; baud= 57600 dTX=   224 dRX=    14 tA=12902400.000000 rA=12902400.000000 tE=        0.02 rE=        0.02
                        	; baud=115200 dTX=   112 dRX=     7 tA=12902400.000000 rA=12902400.000000 tE=        0.02 rE=        0.02
0073: 2100C0   [34]     	ld	hl, uart
0076: 3E07     [41]     	ld	a, 0x07
0078: 77       [48]     	ld	(hl), a
                        
0079: 23       [54]     	inc	hl
007A: 3E00     [61]     	ld	a, 0x00
007C: 77       [68]     	ld	(hl), a
                        
                        	; lock divisor registers and set 8 bit data, no parity, one stop bit.
007D: 2103C0   [78]     	ld	hl, uart + 3
0080: 3E03     [85]     	ld	a, 0x03
0082: 77       [92]     	ld	(hl), a
                        
                        	; write char
0083: 2100C0   [102]    	ld	hl, uart
0086: 3E29     [109]    	ld	a, 0x29
0088: 77       [116]    	ld	(hl), a
                        
0089: 2105C0   [10]     wait1:	ld	hl, uart + 5
008C: 7E       [17]     	ld	a, (hl)
008D: CB77     [25]     	bit	6, a
008F: 28F8     [32|37]  	jr	z, wait1
                        
                        	; write char
0091: 2100C0   [42]     	ld	hl, uart
0094: 3E55     [49]     	ld	a, 0x55
0096: 77       [56]     	ld	(hl), a
                        
0097: 2105C0   [10]     wait2:	ld	hl, uart + 5
009A: 7E       [17]     	ld	a, (hl)
009B: CB77     [25]     	bit	6, a
009D: 28F8     [32|37]  	jr	z, wait2
                        
                        	; write char
009F: 2100C0   [42]     	ld	hl, uart
00A2: 3EAA     [49]     	ld	a, 0xaa
00A4: 77       [56]     	ld	(hl), a
                        
00A5: 2105C0   [10]     wait3:	ld	hl, uart + 5
00A8: 7E       [17]     	ld	a, (hl)
00A9: CB77     [25]     	bit	6, a
00AB: 28F8     [32|37]  	jr	z, wait3
                        
                        	; move bytes around
00AD: 018007   [10]     mover:	ld	bc, 1920
00B0: 110040   [20]     	ld	de, ram
00B3: 210080   [30]     	ld	hl, video
00B6: 7E       [ 7]     again:	ld	a, (hl)
00B7: 12       [14]     	ld	(de), a
00B8: 23       [20]     	inc	hl
00B9: 13       [26]     	inc	de
00BA: 0B       [32]     	dec	bc
00BB: 78       [36]     	ld	a, b
00BC: B1       [40]     	or	c
00BD: 20F7     [47|52]  	jr	nz, again
                        
00BF: 018007   [10]     back:	ld	bc, 1920
00C2: 110080   [20]     	ld	de, video
00C5: 217F47   [30]     	ld	hl, ram + 1919
00C8: 7E       [ 7]     b2:	ld	a, (hl)
00C9: 12       [14]     	ld	(de), a
00CA: 2B       [20]     	dec	hl
00CB: 13       [26]     	inc	de
00CC: 0B       [32]     	dec	bc
00CD: 78       [36]     	ld	a, b
00CE: B1       [40]     	or	c
00CF: 20F7     [47|52]  	jr	nz, b2
                        
00D1: 160A     [ 7]     pause:	ld	d, 10
                        
00D3: 01FFFF   [10]     b4:	ld	bc, 65535
00D6: 0B       [ 6]     b3:	dec	bc
00D7: 78       [10]     	ld	a, b
00D8: B1       [14]     	or	c
00D9: 20FB     [21|26]  	jr	nz, b3
                        
00DB: 15       [25]     	dec	d
00DC: 20F5     [32|37]  	jr	nz, b4
                        
00DE: 188D     [44]     	jr	start
00E0: 18FE     [56]     	jr	$
                        


; +++ segments +++

#CODE ROM      = $0000 =     0,  size = $4000 = 16384

; +++ global symbols +++

NMI      = $0066 =   102  ROM     terminal_fw.asm:37 (unused)
ROM      = $0000 =     0  ROM     terminal_fw.asm:3 (unused)
ROM_end  = $4000 = 16384  ROM     terminal_fw.asm:3 (unused)
ROM_size = $4000 = 16384  ROM     terminal_fw.asm:3 (unused)
RST0     = $0000 =     0  ROM     terminal_fw.asm:10 (unused)
RST1     = $0008 =     8  ROM     terminal_fw.asm:15 (unused)
RST2     = $0010 =    16  ROM     terminal_fw.asm:18 (unused)
RST3     = $0018 =    24  ROM     terminal_fw.asm:21 (unused)
RST4     = $0020 =    32  ROM     terminal_fw.asm:24 (unused)
RST5     = $0028 =    40  ROM     terminal_fw.asm:27 (unused)
RST6     = $0030 =    48  ROM     terminal_fw.asm:30 (unused)
RST7     = $0038 =    56  ROM     terminal_fw.asm:33 (unused)
again    = $00B6 =   182  ROM     terminal_fw.asm:108
b2       = $00C8 =   200  ROM     terminal_fw.asm:120
b3       = $00D6 =   214  ROM     terminal_fw.asm:132
b4       = $00D3 =   211  ROM     terminal_fw.asm:131
back     = $00BF =   191  ROM     terminal_fw.asm:117 (unused)
mover    = $00AD =   173  ROM     terminal_fw.asm:105 (unused)
pause    = $00D1 =   209  ROM     terminal_fw.asm:129 (unused)
ram      = $4000 = 16384  ROM     terminal_fw.asm:6
rom      = $0000 =     0  ROM     terminal_fw.asm:5 (unused)
start    = $006D =   109  ROM     terminal_fw.asm:44
uart     = $C000 = 49152  ROM     terminal_fw.asm:8
video    = $8000 = 32768  ROM     terminal_fw.asm:7
wait1    = $0089 =   137  ROM     terminal_fw.asm:79
wait2    = $0097 =   151  ROM     terminal_fw.asm:89
wait3    = $00A5 =   165  ROM     terminal_fw.asm:99


total time: 0.0009 sec.
no errors
